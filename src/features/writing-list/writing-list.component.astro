---
import {
  profileSectionDivider,
  profileSectionDividerLine,
} from "@/features/profile-section/profile-section.styles";
import {
  writingList,
  writingListItem,
  writingListItemDescription,
  writingListItemLink,
  writingListItemMeta,
  writingListItemTitle,
} from "./writing-list.styles";
import type { WritingListProps } from "./writing-list.types";

const { entries } = Astro.props as WritingListProps;

const dateOptions: Intl.DateTimeFormatOptions = {
  day: "numeric",
  month: "short",
  year: "numeric",
};
---

<ul class={writingList}>
  {
    entries.map((entry, index) => (
      <>
        {index > 0 && (
          <li class="list-none p-0 m-0" aria-hidden="true">
            <div class={profileSectionDivider}>
              <div class={profileSectionDividerLine} />
            </div>
          </li>
        )}
        <li class={writingListItem}>
          <a href={`/writing/${entry.id}`} class={writingListItemLink}>
            <div class={writingListItemTitle}>{entry.data.title}</div>
            <div class={writingListItemMeta}>
              <time datetime={entry.data.pubDate.toISOString()}>
                {entry.data.pubDate.toLocaleDateString("en-GB", dateOptions)}
              </time>
            </div>
            {entry.data.description && (
              <p class={writingListItemDescription}>{entry.data.description}</p>
            )}
          </a>
        </li>
      </>
    ))
  }
</ul>
