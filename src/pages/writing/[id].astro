---
import { getCollection, render } from "astro:content";
import PageHeader from "@/features/page-header/page-header.component.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import {
  writingPostBackLink,
  writingPostBackWrapper,
  writingPostContent,
  writingPostDate,
} from "./writing-post.styles";

export async function getStaticPaths() {
  const entries = await getCollection("writing");
  return entries.map((entry) => ({
    params: { id: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
---

<BaseLayout
	title={entry.data.title}
	description={entry.data.description ?? undefined}
>
	<PageHeader title={entry.data.title} />
	<p class={writingPostDate}>
		<time datetime={entry.data.pubDate.toISOString()}>
			{entry.data.pubDate.toLocaleDateString("en-GB", {
				day: "numeric",
				month: "long",
				year: "numeric",
			})}
		</time>
	</p>
	<div class={writingPostContent}>
		<Content />
	</div>
	<p class={writingPostBackWrapper}>
		<a href="/writing" class={writingPostBackLink()}>
			‚Üê Back to Writing
		</a>
	</p>
</BaseLayout>
